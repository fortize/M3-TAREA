---
title: "M3 Tarea"
author: "Francisco Javier Ortiz Escuchas"
date: "12 de noviembre de 2016"
output: 
    word_document:
    highlight: default
    number_sections: yes
    theme: cosmo
---

******
## Introducción con el objetivo del análisis (con este dataset normalmente suele ser predecir el valor de la nota final G3 o clasificar a los alumnos como aprobados o suspendido en base a que esa nota sea mayor o menor que 5, pero se puede elegir otro si así se quiere)
******

Cargamos las librerias necesarias para el proceso

```{r libraries,eval=TRUE,echo=TRUE}
library(rJava)
library(xlsxjars)
library(xlsx)
library(stringr)
library(ggplot2)
library(knitr)
library(dplyr)
library("plotrix")
```
******
## Carga de los datos y análisis descriptivo del dataset
******
Cargamos los dos datasets (student_mat y student_par y se unen en un único dataset llamado student)

```{r descriptive, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# Cargamos los datos del dataset student-mat
student_mat <- read.table("Estudio Preeliminar/Datos/student-mat.csv",sep=";",header=TRUE)

student_por <- read.table("Estudio Preeliminar/Datos/student-por.csv",sep=";",header=TRUE)

students <- merge(student_mat,student_por,by=c("school","sex","age","address","famsize","Pstatus","Medu","Fedu","Mjob","Fjob","reason","nursery","internet"))
summary(students)
dim(students)
names(students)
 
```
******
## Análisis exploratorio apoyado en algún método NO supervisado
******
```{r exploratory,eval=TRUE, echo=FALSE}
#students[c("AGES")] <-- (students$ages-mean(students$ages,na.rm=T)) / sd(students$ages,na.rm=T)
#students[c("FAMSIZE")] <-- (students$famsize-mean(students$famsize,na.rm=T)) / sd(students$famsize,na.rm=T)
students_mod <- students %>% select(-school,-sex,-address,-famsize,-Pstatus,-Mjob,-Fjob,-reason,-nursery,-internet,-guardian.x,-schoolsup.x,-traveltime.x,-famsup.x,-paid.x,-activities.x,-higher.x,-romantic.x)

kmeans(OutL,centers=2)$tot.withinss
wss <- (nrow(mydata)-1)*sum(apply(mydata,2,var))
  for (i in 2:15) wss[i] <- sum(kmeans(mydata,
                                       centers=i)$withinss)
plot(1:15, wss, type="b", xlab="Numero de Clusters",
     ylab="Sumas de cuadrados dentro de los grupos",
     main="Num de clusters óptimo según Elbow",
     pch=20, cex=2)
kmeans.clust <- kmeans(students_mod, 3)
kmeans.clust
```
******
## Selección de variables, elección, construcción y optimización de al menos dos modelos machine Learning supervisados distintos (por ejemplo, Regresión Lineal y Árboles de Decisión, etc)
******
```{r selection,eval=TRUE, echo=FALSE}
```

******
## Evaluación y comparación de dichos modelos realizados
******
```{r comparation}
```

## Gráficos
```{r graphics, echo=FALSE}
qplot(age, famsize, data = students, color = age)
```